<div class="publishAnnonce my-4">

    <div class="bannerPublish">
    </div>
    <div class="publishAnnonceContain">
        <h2 class="text-center mt-5 mb-5">Vous voulez vendre votre véhicule, <span>Publier une annonce !</span></h2>
        <p class="mt-5 mb-3 text-center">Renseigner le formulaire ci-dessous</p>
        <div class="trait mb-5"></div>

        <div class="formPublish mx-2 shadow p-4 mb-3 rounded-4">

            <!-- app.component.html -->
            <div class="container mt-5">
                <div class="progress">
                    <div class="progress-bar" role="progressbar"
                        [style.width.%]="currentStep === 0 ? 0 : (currentStep === totalSteps ? 100 : progression)" aria-valuemin="0"
                        aria-valuemax="100">
                        {{ currentStep === 0 ? '0' : (currentStep === totalSteps ? '100' : progression) }}%
                    </div>
                </div>
            
                <div class=" mt-4">
                    <form class="card-body" (submit)="addAnnonce()">
                        <!-- Contenu dynamique de l'étape -->
                        <div *ngIf="currentStep === 1">
                            <!-- ÉTAPE 1 -->
                            <h5 class="card-title text-center">Étape 1</h5>
                            <h5 class="my-3">Présentation du véhicule</h5>
                            <div class="mb-3">
                                <label for="nomVehicule" class="form-label">Nom du véhicule</label>
                                <input class="form-control" id="nomVehicule" name="nomVehicule" aria-label="Default select example"
                                    [(ngModel)]="nom" (input)="validateNom()">
                                <span *ngIf="nomTouched && nomEmpty && !validationMessages['nom']" class="text-danger">
                                    Le nom est requis
                                </span>
                                <span *ngIf="validationMessages['nom']" class="text-danger">{{ validationMessages['nom'] }}</span>
                                <span *ngIf="!validationMessages['nom'] && nom" class="text-success">Correct</span>
                            </div>
                            <div class="mb-3">
                                <label for="imagePrincipal" class="form-label">Image principal du véhicule</label>
                                <input (change)="onFileChange($event)" class="form-control" type="file" id="imagePrincipal" name="imagePrincipal"
                                    accept="imagePrincipal/*" required>
                            </div>
                            <div class="mb-3">
                                <label for="descriptionVehicule" class="form-label">descripton du véhicule</label>
                                <textarea class="form-control" id="descriptionVehicule" name="descriptionVehicule"
                                    placeholder="Donner une description et l'etat complet du véhicule" [(ngModel)]="description" (input)="validateDescription()"></textarea>
                                    <span *ngIf="description && descriptionEmpty && !validationMessages['description']" class="text-danger">
                                    Le description est requis
                                </span>
                                <span *ngIf="validationMessages['description']" class="text-danger">{{ validationMessages['description'] }}</span>
                                <span *ngIf="!validationMessages['description'] && description" class="text-success">Correct</span>
                            </div>
                            <div class="d-flex justify-content-center">
                                <button type="button" class="btn btnPublier" (click)="nextStep()" [disabled]="!nom || !image || !description">Suivant</button>
                            </div>
                        </div>
                        <div *ngIf="currentStep === 2">
                            <!-- ÉTAPE 2 -->
                            <h5 class="card-title text-center">Étape 2</h5>
                            <div>
                                <h5 class="my-3">Caracteristiques du véhicule</h5>
                                <div class="row">
                                    <div class="col-12 col-md-6">
                                        <div class="mb-3">
                                            <label for="moteur" class="form-label">Moteur</label>
                                            <select class="form-select" id="moteur" name="moteur" aria-label="Default select example"
                                                [(ngModel)]="moteur">
                                                <option selected value="Dielsel">Diesel</option>
                                                <option value="Essence">Essence</option>
                                                <option value="Hybride">Hybride</option>
                                                <option value="Electrique">Electrique</option>
                                                <option value="Hydrogène">Hydrogène</option>
                                            </select>
                                        </div>
                                        <div class="mb-3">
                                            <label for="annee" class="form-label">Année</label>
                                            <label for="year">Année :</label>
                                            <select class="form-select" id="year" name="year" [(ngModel)]="annee">
                                                <option *ngFor="let year of years" [value]="year">{{ year }}</option>
                                            </select>
                                        </div>
                                        <div class="mb-3">
                                            <label for="prix" class="form-label">Prix</label>
                                            <input type="number" class="form-control" name="prix" id="prix" placeholder="prix" [(ngModel)]="prix">
                                            <span *ngIf="prix && prixEmpty && !validationMessages['prix']" class="text-danger">
                                                Le prix est requis
                                            </span>
                                            <span *ngIf="validationMessages['prix']" class="text-danger">{{ validationMessages['prix'] }}</span>
                                            <span *ngIf="!validationMessages['prix'] && prix" class="text-success">Correct</span>
                                        </div>
                                        <div class="mb-3">
                                            <label for="clim" class="form-label">Climatisation</label>
                                            <select class="form-select" id="clim" name="clim" aria-label="Default select example"
                                                [(ngModel)]="climatisation">
                                                <option selected value="Oui">Oui</option>
                                                <option value="Non">Non</option>
                                            </select>
                                        </div>
                                        <div class="mb-3">
                                            <label for="marque" class="form-label">Marque</label>
                                            <select class="form-select" id="marque" name="marque" aria-label="Default select example"
                                                [(ngModel)]="marque">
                                                <option selected value="Ford">Ford</option>
                                                <option value="Chevrolet">Chevrolet</option>
                                                <option value="Volkswagen">Volkswagen</option>
                                                <option value="BMW">BMW</option>
                                                <option value="Mercedes-Benz">Mercedes-Benz</option>
                                                <option value="Audi">Audi</option>
                                                <option value="Hyundai">Hyundai</option>
                                                <option value="Kia">Kia</option>
                                                <option value="Subaru">Subaru</option>
                                                <option value="Tesla">Tesla</option>
                                                <option value="Mazda">Mazda</option>
                                                <option value="Fiat">Fiat</option>
                                                <option value="Volvo">Volvo</option>
                                                <option value="Porsche">Porsche</option>
                                                <option value="Jeep">Jeep</option>
                                                <option value="Lexus">Lexus</option>
                                                <option value="Ducati">Ducati</option>
                                                <option value="Yamaha">Yamaha</option>
                                                <option value="Kawasaki">Kawasaki</option>
                                                <option value="Suzuki">Suzuki</option>
                                                <option value="Harley-Davidson">Harley-Davidson</option>
                                                <option value="Triumph">Triumph</option>
                                                <option value="Peugeot">Peugeot</option>
                                                <option value="Citroën">Citroën</option>
                                                <option value="Renault">Renault</option>
                                                <option value="Mitsubishi">Mitsubishi</option>
                                            </select>
                                        </div>
                                        <div class="mb-3">
                                            <label for="couleur" class="form-label">Couleur</label>
                                            <!-- <input type="text" class="form-control" name="couleur" id="couleur" placeholder="couleur de la voiture"
                                                                                [(ngModel)]="couleur"> -->
                                            <select class="form-select" id="couleur" name="couleur" aria-label="Default select example"
                                                [(ngModel)]="couleur">
                                                <option selected value="Blanc">Blanc</option>
                                                <option value="Noir">Noir</option>
                                                <option value="Gris">Gris</option>
                                                <option value="Bleu">Bleu</option>
                                                <option value="Rouge">Rouge</option>
                                                <option value="Vert">Vert</option>
                                                <option value="Jaune">Jaune</option>
                                                <option value="Marron">Marron</option>
                                                <option value="Beige">Beige</option>
                                                <option value="Argent">Argent</option>
                                                <option value="Or">Or</option>
                                                <option value="Bronze">Bronze</option>
                                                <option value="Rose">Rose</option>
                                                <option value="Violet">Violet</option>
                                                <option value="Turquoise">Turquoise</option>
                                                <option value="Bleu marine">Bleu marine</option>
                                                <option value="Bordeaux">Bordeaux</option>
                                                <option value="Orange">Orange</option>
                                                <option value="Blanc cassé">Blanc cassé</option>
                                                <option value="Anthracite">Anthracite</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-12 col-md-6">
                                        <div class="mb-3">
                                            <label for="kilometrage" class="form-label">Kilométrage</label>
                                            <select class="form-select" id="kilometrage" name="kilometrage" aria-label="Default select example"
                                                [(ngModel)]="kilometrage">
                                                <option selected value="O km">O km</option>
                                                <option value="-10 000 km">-10 000 km</option>
                                                <option value="-50 000 km">-50 000 km</option>
                                                <option value="-100 000 km">-100 000 km</option>
                                                <option value="-150 000 km">-150 000 km</option>
                                            </select>
                                        </div>
                                        <div class="mb-3">
                                            <label for="carburant" class="form-label">Carburant</label>
                                            <select class="form-select" id="carburant" name="carburant" aria-label="Default select example"
                                                [(ngModel)]="carburant">
                                                <option selected value="Dielsel">Diesel</option>
                                                <option value="Essence">Essence</option>
                                                <option value="Electrique">Electrique</option>
                                            </select>
                                        </div>
                                        <div class="mb-3">
                                            <label for="nbrePlace" class="form-label">Nombre de place</label>
                                            <select class="form-select" id="nbrePlace" name="nbrePlace" aria-label="Default select example"
                                                [(ngModel)]="nbrePlace">
                                                <option selected value="Deux places">Deux places</option>
                                                <option value="Quatre places">Quatre places</option>
                                                <option value="Cinq places">Cinq places</option>
                                                <option value="Six places">Six places</option>
                                                <option value="Sept places">Sept places</option>
                                                <option value="Huit places">Huit places</option>
                                                <option value="Neuf places">Neuf places</option>
                                                <option value="Dix places et plus">Dix places et plus</option>
                                            </select>
                                        </div>
                                        <div class="mb-3">
                                            <label for="localisation" class="form-label">Localisation</label>
                                            <select class="form-select" id="localisation" name="localisation" aria-label="Default select example"
                                                [(ngModel)]="localisation">
                                                <option selected value="Dakar">Dakar</option>
                                                <option value="Diourbel">Diourbel</option>
                                                <option value="Fatick">Fatick</option>
                                                <option value="Kaffrine">Kaffrine</option>
                                                <option value="Kédougou">Kédougou</option>
                                                <option value="Kolda">Kolda</option>
                                                <option value="Louga">Louga</option>
                                                <option value="Matam">Matam</option>
                                                <option value="Saint Louis">Saint Louis</option>
                                                <option value="Sédiou">Sédiou</option>
                                                <option value="Tambacounda">Tambacounda</option>
                                                <option value="Thies">Thies</option>
                                                <option value="Ziguinchor">Ziguinchor</option>
                                            </select>
                                        </div>
                                        <div class="mb-3">
                                            <label for="categorie_id" class="form-label">Categorie du véhicule</label>
                                            <select class="form-select" id="categorie_id" name="categorie_id" aria-label="Default select example"
                                                [(ngModel)]="categorie_id">
                                                <option selected value="{{categorie.id}}" *ngFor="let categorie of Categories">
                                                    {{categorie.nom}} </option>
                                            </select>
                                        </div>
                                        <div class="mb-3">
                                            <label for="carosserie" class="form-label">Carosserie</label>
                                            <select class="form-select" id="carosserie" name="carosserie" aria-label="Default select example"
                                                [(ngModel)]="carosserie">
                                                <option selected value="Berline">Berline</option>
                                                <option value="Coupé">Coupé</option>
                                                <option value="Cabriolet">Cabriolet</option>
                                                <option value="Break">Break</option>
                                                <option value="Monospace">Monospace</option>
                                                <option value="SUV">SUV</option>
                                                <option value="Crossover">Crossover</option>
                                                <option value="Camionnette">Camionnette</option>
                                                <option value="Pickup">Pickup</option>
                                                <option value="Familiale">Familiale</option>
                                                <option value="Routière">Routière</option>
                                                <option value="Van">Van</option>
                                                <option value="Limousine">Limousine</option>
                                                <option value="Voiture_de_course">Voiture de course</option>
                                                <option value="Voiture_de_luxe">Voiture de luxe</option>
                                                <option value="Voiture_électrique">Voiture électrique</option>
                                                <option value="Voiture_hybride">Voiture hybride</option>
                                                <option value="Voiture_occasion">Voiture d'occasion</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="d-flex justify-content-center mt-3">
                                    <button type="button" class="btn btnDark" (click)="prevStep()">Précédent</button>
                                    <button type="button" class="btn btnPublier" (click)="nextStep()"
                                        [disabled]="!moteur || !annee || !prix || !marque || !climatisation || !couleur || !carburant || !localisation || !categorie_id || !carosserie">
                                        Suivant
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div *ngIf="currentStep === 3">
                            <!-- ÉTAPE 3 -->
                            <h5 class="card-title text-center">Étape 3</h5>
                            <div>
                                <input type="hidden" value="refuser" name="etat" [(ngModel)]="etat">
                                
                                <h5 class="my-3">Images secondaires du véhicule</h5>
                                <div class="row">
                                    <div class="col-12 col-md-6">
                                        <div class="mb-3">
                                            <label for="image1" class="form-label">Image 1</label>
                                            <input (change)="img1($event)" type="file" class="form-control" id="image1" name="image1[]"
                                                accept="image1/*" required>
                                        </div>
                                        <div class="mb-3">
                                            <label for="image2" class="form-label">Image 2</label>
                                            <input (change)="img2($event)" type="file" class="form-control" id="image2" name="image2" accept="image2/*"
                                                required>
                                        </div>
                                    </div>
                                    <div class="col-12 col-md-6">
                                        <div class="mb-3">
                                            <label for="image3" class="form-label">Image 3</label>
                                            <input (change)="img3($event)" type="file" class="form-control" id="image3" name="image3" accept="image3/*"
                                                required>
                                        </div>
                                        <div class="mb-3">
                                            <label for="image4" class="form-label">Image 4</label>
                                            <input (change)="img4($event)" type="file" class="form-control" id="image4" name="image4" accept="image4/*"
                                                required>
                                        </div>
                                    </div>
                                </div>
                                <div class="d-flex justify-content-center mt-3">
                                    <button type="button" class="btn btnDark" (click)="prevStep()">Précédent</button>
                                    <button type="submit" class="btn btnPublier" [disabled]="!image1 || !image2 || !image3 || !image4">Soumettre</button>
                                    <button type="button" class="btn btn-danger" [disabled]="!image1 || !image2 || !image3 || !image4" (click)="annulerPublicationAnnonce()">Annuler</button>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>



        </div>

    </div>

    <div class="bannerContent mb-2 mt-4 shadow">
        <h5 class="text-center text-light shadow">Vendez votre véhicule de manière simple et rapide</h5>
    </div>

</div>