<app-navbar></app-navbar>

<section class="banDetailVoiture mt-5"></section>

<section class="detailAnnonce container-fluid p-0">
    <h2 class="text-center my-4">Detail de l'annonce</h2>
    <div class="trait my-3"></div>

    <div class="bandeAnnonce mt-5 mb-5 container-fluid mb-4 py-3" *ngIf="voitureDetails">
        <div class="banContain container">
            <span class="nom"> {{voitureDetails?.nom}} </span>
            <span class="prix"> {{voitureDetails?.prix}} Fcfa</span>
        </div>
    </div>

    <div class="annonceInfos container my-3">
        <div class="row">
            <div class="col-12 col-md-6">
                <div class="contentLf mx-4 mb-4">
                    <div class="imgVehicule mx-3 mb-4">

                        <!-- <img src="{{apiImage}}{{voitureDetails?.image1}}" class="img-fluid" alt=""> -->
                        <div id="carouselExampleInterval" class="carousel slide rounded-3 p-1 shadow" data-bs-ride="carousel">
                            <div class="carousel-inner">
                                <div class="carousel-item active" data-bs-interval="10000">
                                    <img src="{{apiImage}}{{voitureDetails?.image1}}"
                                        class="d-block w-100 imgSlide rounded-3" alt="...">
                                </div>
                                <div class="carousel-item" data-bs-interval="2000">
                                    <img src="{{apiImage}}{{voitureDetails?.image2}}"
                                        class="d-block w-100 imgSlide rounded-3" alt="...">
                                </div>
                                <div class="carousel-item">
                                    <img src="{{apiImage}}{{voitureDetails?.image3}}"
                                        class="d-block w-100 imgSlide rounded-3" alt="...">
                                </div>
                                <div class="carousel-item">
                                    <img src="{{apiImage}}{{voitureDetails?.image4}}"
                                        class="d-block w-100 imgSlide rounded-3" alt="...">
                                </div>
                            </div>
                            <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleInterval" data-bs-slide="prev">
                                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                <span class="visually-hidden">Previous</span>
                            </button>
                            <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleInterval" data-bs-slide="next">
                                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                <span class="visually-hidden">Next</span>
                            </button>
                        </div>
                    </div>
                    <div class="blockImg mx-4 mb-4">
                        <img src="{{apiImage}}{{voitureDetails?.image1}}" class="img-fluid" alt="">
                        <img src="{{apiImage}}{{voitureDetails?.image2}}" class="img-fluid" alt="">
                        <img src="{{apiImage}}{{voitureDetails?.image3}}" class="img-fluid" alt="">
                        <img src="{{apiImage}}{{voitureDetails?.image4}}" class="img-fluid" alt="">
                    </div>
                    <div class="p-2 alert mx-3">
                        <span class="date"> Publiée le {{voitureDetails?.updated_at | date: 'dd/MM/yyyy HH:mm:ss' }} </span>
                        <button class="btn fw-bold" data-bs-toggle="modal" data-bs-target="#formSignal">Signaler l'annonce</button>
                    </div>
                </div>

            </div>
            <div class="col-12 col-md-6" [attr.data-aos]="'fade-down'" [attr.data-aos-duration]="800" [attr.data-aos-delay]="1200">
                <div class="contentLr card mx-4 shadow rounded-4 border-0" *ngIf="proprietaireInfo">
                    <img src="{{apiImage}}{{proprietaireInfo?.image}}" alt="" class="img-fluid my-4 border-2 imgProp">
                    <h3 class="nomProp fw-bold text-center my-3"> {{proprietaireInfo?.prenom}} {{proprietaireInfo?.nom}} </h3>
                    <div class="infosProp mt-3">
                        <div class="location mb-3">
                            <span class="icon"><i class="fa-solid fa-location-dot"></i></span><span class="text"> {{proprietaireInfo?.adresse}} </span>
                        </div>
                        <div class="phone mb-3">
                            <span class="icon"><i class="fa-solid fa-phone"></i></span><span class="text"> {{proprietaireInfo?.telephone}} </span>
                        </div>
                        <div class="email mb-3">
                            <span class="icon"><i class="fa-solid fa-envelope"></i></span><span class="text"> {{proprietaireInfo?.email}} </span>
                        </div>
                    </div>
                    <div class="sociauxProp mt-3 px-3 py-2 shadow rounded-4 mb-4">
                        <span class="iconSProp"><a href="https://wa.me/{{proprietaireInfo?.telephone}}"><i class="fa-brands fa-whatsapp"></i></a></span>
                        <!-- <span class="iconSProp"><i class="fa-brands fa-facebook-f"></i></span> -->
                        <span class="iconSProp"><i class="fa-solid fa-paper-plane"></i></span>
                        <span class="iconSProp"><a href="mailto:{{proprietaireInfo?.email}}"><i class="fa-solid fa-envelope"></i></a></span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <hr>
    <div class="middleDetail mb-3 d-flex justify-content-center">
        <h4>Caractéristiques du véhicule</h4>
    </div>
    <hr>
    
    <div class="contentDetail container">
        <div class="caracteristiques row g-3 mb-3">
            <div class="infosV col-12 col-md-2">
                <div class="card rounded-3">
                    <span class="libelle">Nom:</span>
                    <p class="value"> {{voitureDetails?.nom}} </p>
                </div>
            </div>
            <div class="infosV col-12 col-md-2">
                <div class="card rounded-3">
                    <span class="libelle">Moteur:</span>
                    <p class="value"> {{voitureDetails?.moteur}} </p>
                </div>
            </div>
            <div class="infosV col-12 col-md-2">
                <div class="card rounded-3">
                    <span class="libelle">Kilométrage:</span>
                    <p class="value"> {{voitureDetails?.kilometrage}}</p>
                </div>
            </div>
            <div class="infosV col-12 col-md-2">
                <div class="card rounded-3">
                    <span class="libelle">Année:</span>
                    <p class="value"> {{voitureDetails?.annee}} </p>
                </div>
            </div>
            <div class="infosV col-12 col-md-2">
                <div class="card rounded-3">
                    <span class="libelle">Carburant:</span>
                    <p class="value"> {{voitureDetails?.carburant}} </p>
                </div>
            </div>
            <div class="infosV col-12 col-md-2">
                <div class="card rounded-3">
                    <span class="libelle">Prix:</span>
                    <p class="value"> {{voitureDetails?.prix}} Fcfa</p>
                </div>
            </div>
        </div>
        <div class="caracteristiques row g-3 d-flex justify-content-center">
            <div class="infosV col-12 col-md-2 ">
                <div class="card rounded-3">
                    <span class="libelle">Carosserie:</span>
                    <p class="value"> {{voitureDetails?.carosserie}}</p>
                </div>
            </div>
            <div class="infosV col-12 col-md-2 ">
                <div class="card rounded-3">
                    <span class="libelle">Couleur:</span>
                    <p class="value"> {{voitureDetails?.couleur}}</p>
                </div>
            </div>
            <div class="infosV col-12 col-md-2 ">
                <div class="card rounded-3">
                    <span class="libelle">Marque:</span>
                    <p class="value"> {{voitureDetails?.marque}}</p>
                </div>
            </div>
            <div class="infosV col-12 col-md-2 ">
                <div class="card rounded-3">
                    <span class="libelle">Adresse:</span>
                    <p class="value"> {{voitureDetails?.localisation}}</p>
                </div>
            </div>
            <div class="infosV col-12 col-md-2 ">
                <div class="card rounded-3">
                    <span class="libelle">Places:</span>
                    <p class="value"> {{voitureDetails?.nbrePlace}}</p>
                </div>
            </div>
        </div>
        <div class="mt-3">
            <div class="card description rounded-3 p-3">
                <span class="libelle">Descriptiion:</span>
                <p class="value"> {{voitureDetails?.description}}</p>
            </div>
        </div>
    </div>

    <div class="comments py-4 mt-4 mb-4 container-fluid">
        <div class="commentsContain container">
            <h3 class="fw-bold mb-0">Avis</h3>
            <hr class="mb-2 ligneComment">

            <div *ngIf="topComments && topComments.length === 0">
                <p class="fw-lighter text-light fw-bold"> <span class="text-warning">Quelle chance!</span> Soyez le premier à
                    laisser un commentaire.</p>
            </div>

            <div class="row mt-3 g-2">
                <div class="col-12 col-md-8 p-2">
                    <div class="avis" *ngFor="let comment of topComments">
                        <div class="headC">
                            <div class="headL">
                                <img src="/assets/images/profil/profil2.jpg" alt="" class="img-fluid">
                                <span class="nomC">Malick Sarr</span>
                            </div>
                            <!-- <div class="stars">
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-regular fa-star"></i>
                                <i class="fa-regular fa-star"></i>
                            </div> -->
                        </div>
                        <div class="bodyC">
                            <p class="textC">
                                {{comment.commentaire}}
                            </p>
                        </div>
                        <hr>
                    </div>
                </div>
                <div class="col-12 col-md-4 px-5">
                    <div class=" comtRighr pt-5">
                        <img src="{{apiImage}}{{voitureDetails?.image1}}" alt="" class="img-fluid mb-4">
                        <button class="btn btnComment" data-bs-toggle="modal" data-bs-target="#formComment">Poster un commentaire</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="alerte d-flex justify-content-center align-content-center my-5">
        <button class="btn" data-bs-toggle="modal" data-bs-target="#prudence">Attention: Soyez prudent</button>
    </div>

    <div class="carsContainer container">
        <h2 class="text-center my-4">Annonces similaires</h2>
        <div class="trait mb-4"></div>
    
    
        <div class="carteAnnonces mb-5 container mt-3">
            <div class="row cartes m-0 g-4" [attr.data-aos]="'fade-up'" [attr.data-aos-duration]="800"
                [attr.data-aos-delay]="500">
    
                <div class="col-12 col-md-4" *ngFor="let voiture of annonceVoituresEnAvant">
                    <div class="card shadow">
                        <div class="cardImg mx-3">
                            <img src="{{apiImage}}{{voiture?.image1}}" class="img-fluid w-100" alt="">
                        </div>
                        <div class="cardTitle mx-3">
                            <span class="nom"> {{voiture?.nom}} </span>
                            <span class="profil"><img src="{{apiImage}}{{voiture.infosProprietaire?.image}}" class="img-fluid"
                                    alt=""></span>
                        </div>
                        <div class="cardTrait mb-3 mt-2"></div>
                        <div class="cardDetails mx-3">
                            <div class="left">
                                <p><img src="/assets/images/iconSvg/moteur.png" class="" alt="">{{voiture?.moteur}}</p>
                                <p><img src="/assets/images/iconSvg/calendar.png" alt="">{{voiture?.annee}} </p>
                            </div>
                            <div class="Right">
                                <p><img src="/assets/images/iconSvg/dashboard.png" alt="">{{voiture?.kilometrage}}</p>
                                <p><img src="/assets/images/iconSvg/fuel.png" alt="">{{voiture?.carburant}} </p>
                            </div>
                        </div>
                        <p class="text-center"><img src="/assets/images/iconSvg/money.png" alt=""> {{voiture?.prix}} Fcfa</p>
                        <div class="cardTrait"></div>
                        <div class="cardButton mx-3 my-3">
                            <button class="btn">
                                <a class="text-light" [routerLink]="['/vehicules/voitures/detailVoiture', voiture.id]">
                                    Consulter l'annonce
                                </a>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="bannerEnd" [attr.data-aos]="'zoom-in'" [attr.data-aos-duration]="800" [attr.data-aos-delay]="1200">
    </div>
</section>

<app-footer></app-footer>



<!-- Modal Alert signalement-->
<div class="modal fade rounded-4" id="annonceSignal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">

            <div class="modal-body alertSignal m-4">
                <img src="/assets/images/alertIcon/error.png" class="img-fluid mb-4" alt="">
                <h4 class="text-center mb-4">Attention</h4>
                <p class="text-center my-3">Voulez-vous vraiment signaler cette annonce ?</p>
                <div class="btns d-flex justify-content-between my-3 mx-4">
                    <button class="btn btnYes" data-bs-toggle="modal" data-bs-target="#formSignal">Oui</button>
                    <button class="btn btnNo" data-bs-dismiss="modal">Non</button>
                </div>
            </div>

        </div>
    </div>
</div>
<!-- Modal signalement-->


<!-- Modal Form signalement-->
<div class="modal fade" id="formSignal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header shadow">
                <h1 class="modal-title fs-4" id="exampleModalLabel">Signaler cette annonce</h1>
                <button type="button" class="btn" data-bs-dismiss="modal"><i
                        class="fa-solid fa-circle-xmark"></i></button>
            </div>

            <div class="modal-body">
                <form action="">
                    <div class="mb-3">
                        <label for="raisonSignal" class="form-label">Motif du signalement</label>
                        <textarea name="raisonSignal" id="raisonSignal" name="raisonSignal" class="form-control" [(ngModel)]="raisonSignal"></textarea>
                    </div>
                    <div class="btnsForm d-flex justify-content-center align-content-center">
                        <button class="btn mx-3 btnSignal" (click)="addSignal(voitureDetails.id)" data-bs-dismiss="modal">Signaler</button>
                        <button class="btn mx-3 btnOff" data-bs-dismiss="modal">Annuler</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<!-- Modal signalement-->


<!-- Modal Form commentaire-->
<div class="modal fade" id="formComment" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header shadow">
                <h1 class="modal-title fs-4" id="exampleModalLabel">Laisser un commentaire</h1>
                <button type="button" class="btn" data-bs-dismiss="modal"><i
                        class="fa-solid fa-circle-xmark"></i></button>
            </div>

            <div class="modal-body">
                <form action="">
                    
                    <div class="mb-3">
                        <label for="commentaire" class="form-label">Votre commentaire</label>
                        <textarea name="commentaire" id="commentaire" class="form-control" [(ngModel)]="commentaire"></textarea>
                    </div>

                    <div class="btnsForm d-flex justify-content-center align-content-center">
                        <button class="btn mx-3 btnSignal" (click)="addComment(voitureDetails.id)" data-bs-dismiss="modal">Commenter</button>
                        <button class="btn mx-3 btnOff" data-bs-dismiss="modal">Annuler</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<!-- Modal commentaire-->



<!-- Modal Form commentaire-->
<div class="modal fade" id="prudence" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header shadow">
                <h1 class="modal-title fs-4" id="exampleModalLabel">Conseils de sécurité</h1>
                <button type="button" class="btn" data-bs-dismiss="modal"><i
                        class="fa-solid fa-circle-xmark"></i></button>
            </div>

            <div class="modal-body">
                <div class="prudenceContain d-flex justify-content-center align-content-center flex-column">
                    <h3 class="text-center my-3">Soyez prudent</h3>
                    
                    <p class="textPrudence my-4 ">
                        Ne pas envoyer de paiements sans avoir verifié le produit.
                        <br>
                        Ne pas envoyer d'argent par des moyens de transfert d'argent,
                        par virement bancaire ou par n'importe quels autre moyens.
                        <br>
                        Donner rdv au vendeur dans un lieu public à une heure de passage.
                    </p>
                    
                    <button class="btn btnprudence my-3" data-bs-dismiss="modal">Ok</button>

                </div>
            </div>
        </div>
    </div>
</div>
<!-- Modal Form commentaire-->









